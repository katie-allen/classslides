---
title: "Day 3 - Visualizing [Large] Datasets"
author: ""
params:
  day: 3
  ptitle: true
  pbackground: true
  dtype: "none"
---

```{r notes, include=FALSE}
#  revealjs::revealjs_presentation:
#    self_contained: false
#    reveal_plugins: ["chalkboard"]
#    reveal_options:
#      chalkboard:
#        theme: whiteboard
#        toggleNotesButton: false
```


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)

if (params$day %% 2 == 0) md_intro_format <- "even_intro_format.Rmd"
if (params$day %% 2 == 1) md_intro_format <- "odd_intro_format.Rmd"

```

```{r nextone}
vday <- params$day - 1
vlink <- paste0("http://www.perceptualedge.com/example", vday, ".php")
titlelink <- paste0('{data-background-iframe="', vlink, '"}')
```

# Becoming the Critic. {data-background=#e8d725}

## `r titlelink`

[Visualization of the Day](`r vlink`)

## Team Leader

Review what a team leader should do while reviewing case studies.

```{r child=md_intro_format}

```

# 'Being' Reading Discussion

## Illustrate how a Team Leader may lead the discussion

> - I will illustrate how the team lead should lead the discussion.
> - I have more than necessary, so that you get multiple examples.

## Hans Rosling: Show Variation

- Hans showed that [Swedish top students know statistically significantly less about the world than the chimpanzees](https://www.youtube.com/embed/usdJgEwMinM?rel=0&amp;start=80)

- My favorite quote, "**The problem was not ignorance it was preconceived ideas.**" What point is he trying to make?

- According to Hans, what is driving these [false] preconceived ideas?
<!-- Relying on the mean too much -->
<!-- He shows this with Africa. Such a lot of difference within countries -->

- Can you think of instances in your own life where this occurs?
<!-- The age of my kids, compared to Octomom's kids -->
<!-- Cash flow (personal or of a business) averages one thing, but big positives and negatives. -->

## Hans Rosling Thesis

- In one sentence, what would you say is Hans' thesis statement?

- Don't oversummarize the data. Showing variation is even better, but first and foremost, show the data (correctly).


## Stephen Few's Steps (Effectively Communicating Numbers)
<!-- This is good in theory, but I don't know if I believe it in practice. -->
<!-- It seems to work well for big presentations: conferences, papers, client meetings. But the lines get really blurry daily meetings with boss, stakeholders, etc. Where does exploratory data analysis fit in to this?(great question to ask students) -->
> 1. Message
> 2. Graphics
> 3. Data munging.
> 4. Fine tune the message.
> 5. Clarify the point.

- How does this process differ from what may commonly be done?

- What will be the impact of following this process instead?

- I'm not sure how this works in practice. Works well for big presentations. However, lines get really blurred between daily meetings with boss, stakeholders, etc. Where does exploratory data analysis fit in this graph?
<!-- "The simple graph has brought more information to the data analyst's mind than any other device." ~John Tukey -->


## Asking the right questions

> - [Harness the power of questions & Clarify Terms](https://www.lynda.com/Business-Skills-tutorials/Harness-power-questions/477451/574315-4.html)
> - A truly wise person may not have the answers, but knows which questions to ask.

> - I encourage you to sharpen you ability to ask questions, by asking questions of your own graphs?

<!-- ## What went well, what did not? -->

<!-- > - In the three demonstrations, what went well, what could be improved? -->

<!-- ## Boaz Super (Hiring the best data scientist) -->

<!-- - Trait 1: Ask Questions that Matter. What does that mean? -->
<!-- - Trait 2: Determine the question has been answered. Identify and satisfy assumptions. -->
<!--     - A commitment to intellectual honesty. What does that mean? -->
<!-- - Trait 3: Creative thinking: vigorous attempts to fail their own answers? -->

<!-- - An easy way to assess job candidates on the three traits is to ask them to briefly describe one or more of their past projects, and then ask them many follow-up questions about whether and how they applied the three traits. -->

<!-- ## Data Science Jobs -->

<!-- - [What a data scientist is not.](https://www.youtube.com/embed/iQBat7e0MQs?rel=0&amp;start=220) -->
<!-- - [What is the life cycle of a data science project?](https://www.youtube.com/embed/iQBat7e0MQs?rel=0&amp;start=375) -->
<!--     - Demand for deep analytical talent in the U.S. projected to be 50-60% greater than supply by 2018, leading to a shortage of 140,000 to 190,000 people as well as 1.5 million managers and analysts. -->



# Data Science Collaboration Tools

## Github Reminder

Enter your Github username if you haven't yet (was part of Task 2)


https://docs.google.com/spreadsheets/d/13aQsQYnGTQXyyBUGzE1V9MExEvG5woAmygtkdjltdjk/edit#gid=787697485

## Slack Workspace

> - https://byuidwv.slack.com/signup - byuidwv
>    - enter your BYU-Idaho email, click Continue with Email, then wait for the email confirmation
> - Consider adding the Data Science Society workspace (byuidss.slack.com)



# Day 3 Lesson

## Lesson objectives

* Connect ggplot syntax to the concept of grammar of graphics and layering to create plots
  * introduce scale_*_continuous()
  * introduce coord_*()
* Practice using ggplot()
    *  geom_col vs. geom_bar
    *  geom_histogram, geom_point, geom_boxplot, geom_violin, geom_bswarm, geom_quasirandom, etc.
*  Strategies for visualizing large datasets: univariate and bivariate plots

# The Grammar of Graphics {data-background=#e8d725}

## Introduction to the Grammar

<iframe width="760" height="445" src="https://www.youtube.com/embed/uiTc55clwuA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

## Introduction to ggplot2 

<iframe width="760" height="445" src="https://www.youtube.com/embed/PiY9hwOkL8U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

# Go to code example of Task 3, skip rest of slides

## beeswarm example

![](beeswarm2-1.png)

```{r eval = FALSE, echo = TRUE}

library(ggbeeswarm)
gg_base + geom_quasirandom(alpha = .6, size = .75) + 
  coord_cartesian(ylim = c(-50, 500)) 
```


# Wrangling and ggplot with iris data

## ggplot2 and iris data

Use the `iris` data to create a faceted visualization. Encode data in a `color`, `shape`, and `size` layer or geometry.

Add a layer that pulls from a different data set
<!-- ggplot(iris) + geom_point(aes(x=Sepal.Length, y= Sepal.Width, color = Species, shape = Species, size = Petal.Length)) + facet_wrap(vars(Species)) + scale_shape_manual(values =  c(1, 5, 7)) + geom_hline(data = avgwid, aes(yintercept = avg)) -->

# Wrangling Data {data-background=#e8d725}

## The pipe `%>%`

You can read it as a series of imperative statements: group, then summarize, then filter. As suggested by the reading, a good way to pronounce %>% when reading code is **"then"**.

* Behind the scenes, x %>% f(y) turns into f(x, y), and x %>% f(y) %>% g(z) turns into g(f(x, y), z) and so on. 
* You can use the pipe to rewrite multiple operations in a way that you can read left-to-right, top-to-bottom. 
* We'll use piping frequently from now on because it considerably improves the readability of code.


## Data Manipulation Verbs

> - `filter`  - 
> - `sort` - 
> - `select`  - 
> - `mutate`  - 

## Data Manipulation Verbs

> - `filter`  - filter your data to a smaller set of important rows.
> - `sort` - Organize the row order of my data
> - `select`  - select specific columns to keep or remove 
> - `mutate`  - add new mutated (changed) variables as columns to my data.

## Data Manipulation Verbs for Summaries

> - `summarise` - 
> - `group by`  - 

## Data Manipulation Verbs for Summaries

> - `summarise` - build summaries of the columns specified
> - `group by`  - divide your data into groups. Often used with `summarise`

## Data Manipulation to Reshape/Resturcture a Dataset

> - `stack` - 
> - `unstack`  - 
> - `seperate` - 
> - `unite` - 

## Data Manipulation to Reshape/Resturcture a Dataset

> - `stack` - convert data from "wide" to "long" format by moving column names into a *key* column, *gathering* the column values into a single value column
> - `unstack`  - convert data from "long" to "wide" format by using unique values of a *key* column as new column names, and values being placed in one of the new columns based on its key value in the original data structure
> - `seperate` - parse, or break apart, each cell into several cells (usually applied to columns, but can be applied row wise as well)
> - `unite` - collapse or combine cells across several columns to make a single column

## Class Activity #1 Using Paper

![](../images/data_verbs_activity1_start.PNG)

![](../images/data_verbs_activity1_end.PNG)

## Class Activity #2 Using Paper
<!--Changing size of the end table image so it fits easily on the slide-->

![](../images/data_verbs_activity2_start.PNG){width=55%}
![](../images/data_verbs_activity2_end.PNG){width=33%}


## Practice reading code

With your table, write this code out in an English paragraph.

```{r weirdname, eval=FALSE, echo=TRUE}
delays <- flights %>% 
  group_by(dest) %>% 
  summarise(
    count = n(),
    dist = mean(distance, na.rm = TRUE),
    delay = mean(arr_delay, na.rm = TRUE)
  ) %>% 
  filter(count > 20, dest != "HNL")
```

## Mapping Data Verbs to R Commands

**dplyr**  
filter - `filter()`  
sort - `arrange()`  
select - `select()`  
mutate - `mutate()`  
summarise - `summarise()`  
group by - `group_by()`  

**tidyr** (we'll practice more later)  
stack - `gather()`  
unstack - `spread()`  
seperate - `seperate()`  
unite - `unite()`; or `paste()` in base R

## Practice using dplyr

Use `filter()`, `arrange()`, `select()`, `mutate()`, `group_by()`, and `summarise()`. With `library(tidyverse)` tackle the following challenges.

Take turns in the driver's seat.

> 1. Arrange the `iris` data by `Sepal.Length` and display the first six rows.
> 2. Select the `Species` and `Petal.Width` columns and put them into a new data set called `testdat`.
> 3. Create a new table that has the mean and standard deviation for petal width for each Species.
> 4. Read about the `?summarise_all()` function and get a new table with the means and standard deviations for all the variables for each Species.
> 5. Look at the examples in the `summarise_all()` help file and see if you can find other use cases for the `summarise_` or `mutate_` functions.

```{r eval=FALSE, include = FALSE}
#1
iris %>% arrange(Sepal.Length) %>% head()
#2
testdat <- iris %>% select(Species, Petal.Width)
#3
iris %>% group_by(Species) %>% mutate(mn = mean(Petal.Width), std = sd(Petal.Width))
#4
iris %>% 
  group_by(Species) %>% 
  summarise_all(list(~mean(.), ~sd(.)))

#5
#For example, calculating the mean of all the numeric variables.
```
